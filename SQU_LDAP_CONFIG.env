# LDAP Configuration for Sultan Qaboos University (SQU)
# Copy this file to backend/.env and update the values

# LDAP Server Configuration
AD_SERVER=ldap.squ.edu.om
AD_PORT=636
AD_USE_SSL=true
AD_USE_TLS=false

# Base DN Configuration for SQU
AD_BASE_DN=DC=squ,DC=edu,DC=om
AD_USER_DN=OU=Users,DC=squ,DC=edu,DC=om
AD_GROUP_DN=OU=Groups,DC=squ,DC=edu,DC=om

# Service Account for LDAP Binding
# Note: You'll need to get these credentials from SQU IT department
AD_BIND_USER=CN=ServiceAccount,OU=Service Accounts,DC=squ,DC=edu,DC=om
AD_BIND_PASSWORD=your-service-account-password

# JWT Configuration for Application Tokens
SECRET_KEY=your-super-secret-jwt-key-change-this-in-production
JWT_EXPIRY_HOURS=8

# LDAP Search Configuration (RFC 2254 compliant filters)
# Common search filters for SQU Active Directory
AD_USER_SEARCH_FILTER=(&(objectClass=person)(sAMAccountName={username}))
AD_GROUP_SEARCH_FILTER=(objectClass=group)

# Connection Settings (RFC 2251 compliant)
AD_CONNECTION_TIMEOUT=30
AD_SEARCH_TIMEOUT=60
AD_MAX_CONNECTIONS=10

# SSL/TLS Configuration
AD_VERIFY_SSL=true
AD_SSL_CERT_FILE=
AD_SSL_KEY_FILE=
AD_SSL_CA_FILE=

# Sync Configuration
AD_SYNC_INTERVAL_HOURS=24
AD_SYNC_BATCH_SIZE=100
AD_ENABLE_AUTO_SYNC=true

# Account Status Verification
AD_CHECK_ACCOUNT_STATUS=true
AD_DEACTIVATE_EXPIRED_ACCOUNTS=true
AD_DEACTIVATE_DISABLED_ACCOUNTS=true

# Note: Role mapping removed - roles are managed directly in the database
# The application will assign roles based on database configuration, not AD groups

# Default roles for SQU users
AD_DEFAULT_INTERNAL_ROLE=student
AD_DEFAULT_EXTERNAL_ROLE=external

# Referral Handling (RFC 2251)
AD_FOLLOW_REFERRALS=false

# Additional SQU-specific settings
# Database Configuration
DATABASE_URL=sqlite:///./mfqod.db

# Email Configuration (Google/Gmail)
EMAIL_ENABLED=true
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=your-email@gmail.com
SMTP_PASSWORD=your-16-character-app-password
SMTP_TLS=true
SMTP_SSL=false
MAIL_FROM=your-email@gmail.com
MAIL_FROM_NAME="SQU Lost & Found System"
EMAIL_TEMPLATE_DIR=app/templates/email

# Email Rate Limiting
EMAIL_BATCH_SIZE=50
EMAIL_BATCH_DELAY=1

# Application Settings
DEBUG=false
LOG_LEVEL=INFO

# Global Rate Limiting Configuration
ENABLE_GLOBAL_RATE_LIMIT=true
PUBLIC_API_RATE_LIMIT_PER_MINUTE=30
AUTHENTICATED_API_RATE_LIMIT_PER_MINUTE=60
RATE_LIMIT_WINDOW_MINUTES=1
